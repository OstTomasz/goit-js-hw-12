{"version":3,"file":"01-gallery.js","sources":["../src/01-gallery.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('#form');\nconst input = document.querySelector('#form-input');\nconst loader = document.querySelector('#loader');\nconst gallery = document.querySelector('#gallery');\n\nlet searchString = '';\nconst APIURL = `https://pixabay.com/api/`;\n\nconst element = (tag, props) =>\n  Object.assign(document.createElement(tag), props);\n\nconst createGalEl = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  const elemLink = element('a', {\n    className: 'lightbox-link',\n    href: largeImageURL,\n  });\n  const galEl = element('li', { className: 'result' });\n\n  const img = element('img', {\n    className: 'result-pic',\n    src: webformatURL,\n    alt: tags,\n  });\n\n  const description = element('div', { className: 'result-desc' });\n\n  const likesEl = element('div', { className: 'desc-el' });\n  const likesHead = element('p', {\n    className: 'desc-header',\n    textContent: 'Likes',\n  });\n  const likesVal = element('p', {\n    className: 'desc-value',\n    textContent: likes,\n  });\n\n  likesEl.append(likesHead, likesVal);\n\n  const viewsEl = element('div', { className: 'desc-el' });\n  const viewsHead = element('p', {\n    className: 'desc-header',\n    textContent: 'Views',\n  });\n  const viewsVal = element('p', {\n    className: 'desc-value',\n    textContent: views,\n  });\n\n  viewsEl.append(viewsHead, viewsVal);\n\n  const comEl = element('div', { className: 'desc-el' });\n  const comHead = element('p', {\n    className: 'desc-header',\n    textContent: 'Comments',\n  });\n  const comVal = element('p', {\n    className: 'desc-value',\n    textContent: comments.toString(),\n  });\n\n  comEl.append(comHead, comVal);\n\n  const downloadEl = element('div', { className: 'desc-el' });\n  const downloadHead = element('p', {\n    className: 'desc-header',\n    textContent: 'Downloads',\n  });\n  const downloadVal = element('p', {\n    className: 'desc-value',\n    textContent: downloads,\n  });\n\n  downloadEl.append(downloadHead, downloadVal);\n\n  description.append(likesEl, viewsEl, comEl, downloadEl);\n\n  elemLink.append(img);\n  galEl.append(elemLink, description);\n\n  return galEl;\n};\n\nconst renderElements = (images, rootList) => {\n  const fragment = document.createDocumentFragment();\n  fragment.append(...images.map(createGalEl));\n\n  rootList.append(fragment);\n};\n\nlet lightbox = new SimpleLightbox('#gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  animationSpeed: 250,\n  fadeSpeed: 250,\n  scrollZoom: false,\n});\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  if (gallery.innerHTML !== '') {\n    simpleLightbox.refresh();\n  }\n  searchString = input.value.trim();\n  const params = new URLSearchParams({\n    key: '35169635-92091552d9eccdba3eb57d7a9',\n    q: searchString,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  if (searchString !== '') {\n    loader.classList.remove('visibility');\n    fetch(APIURL + '?' + params)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status, response.statusText);\n        }\n        loader.classList.add('visibility');\n        return response.json();\n      })\n      .then(response => {\n        if (response.hits.length === 0) {\n          iziToast.error({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n          });\n        }\n        const hits = response.hits;\n        input.value = '';\n        return hits;\n      })\n      .then(hits => {\n        renderElements(hits, gallery);\n        lightbox.refresh();\n      })\n      .catch(error => {\n        console.log(error);\n        iziToast.error({\n          message: 'Oh no! There is an error!' + error,\n        });\n      });\n  } else {\n    iziToast.info({\n      message: 'Type correct search params!',\n    });\n  }\n});\n"],"names":["form","input","loader","gallery","searchString","APIURL","element","tag","props","createGalEl","webformatURL","largeImageURL","tags","likes","views","comments","downloads","elemLink","galEl","img","description","likesEl","likesHead","likesVal","viewsEl","viewsHead","viewsVal","comEl","comHead","comVal","downloadEl","downloadHead","downloadVal","renderElements","images","rootList","fragment","lightbox","SimpleLightbox","e","simpleLightbox","params","response","iziToast","hits","error"],"mappings":"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"}